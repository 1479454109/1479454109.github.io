import{ab as e,x as t,ac as i,C as a,B as o}from"./index-66b61406.js";const s={invoke(e){var i;e.url.startsWith("http")||(e.url="https://pcapi-xiaotuxian-front-devtest.itheima.net"+e.url),e.timeout=1e4,e.header={...e.header,"source-client":"miniapp"};const a=null==(i=t().profile)?void 0:i.token;a&&(e.header.Authorization=a)}};e("request",s),e("uploadFile",s);const n=e=>new Promise(((s,n)=>{i({...e,success(e){const i=e.statusCode;if(i>=200&&i<300)s(e.data);else if(401==i){t().clearProfile(),a({url:"/pages/login/login"}),n(e)}else o({icon:"none",title:e.data.msg||"请求错误"}),n(e)},fail(e){o({icon:"none",title:"网络错误"}),n(e)}})}));export{n as h};
