import{d as e,H as s,m as a,p as l,o as t,c as u,w as o,a as r,b as i,u as d,j as n,r as c,F as p,i as v,h as f,y as g,J as m,e as h,t as y,K as _,L as b,f as I,k as w,v as k}from"./index-66b61406.js";import{h as T}from"./http.c8e1d22e.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";const S=(e,s)=>T({method:"GET",url:e,data:s}),j=x(e({__name:"hot",props:{type:null},setup(e){const T=e,x=[{type:"1",title:"特惠推荐",url:"/hot/preference"},{type:"2",title:"爆款推荐",url:"/hot/inVogue"},{type:"3",title:"一站买全",url:"/hot/oneStop"},{type:"4",title:"新鲜好物",url:"/hot/new"}].find((e=>e.type==T.type));s({title:null==x?void 0:x.title});let j=a(""),z=a([]),C=a(0);l((()=>{(async()=>{const e=await S(x.url,{page:1,pageSize:10});j.value=e.result.bannerPicture,z.value=e.result.subTypes.map((e=>({...e,finished:!0})))})()}));const E=async()=>{const e=z.value[C.value];if(z.value[C.value].finished){e.goodsItems.page++;const s=await S(x.url,{page:e.goodsItems.page,pageSize:10,subType:e.id});z.value[C.value].finished=e.goodsItems.counts>10*e.goodsItems.page,z.value[C.value].goodsItems.items.push(...s.result.subTypes[C.value].goodsItems.items)}};let F=a(!1);const G=async()=>{F.value=!0,z.value[C.value].goodsItems.page=1;const e=await S(x.url,{page:1,pageSize:10,subType:z.value[C.value].id});z.value[C.value]=e.result.subTypes[C.value],z.value[C.value].finished=!0,F.value=!1};return(e,s)=>{const a=v,l=f,T=I,x=w,S=k;return t(),u(l,{class:"viewport"},{default:o((()=>[r(" 推荐封面图 "),i(l,{class:"cover"},{default:o((()=>[i(a,{src:d(j)},null,8,["src"])])),_:1}),r(" 推荐选项 "),i(l,{class:"tabs"},{default:o((()=>[(t(!0),n(p,null,c(d(z),((e,s)=>(t(),u(T,{key:e.id,class:g(["text",{active:s===d(C)}]),onClick:e=>m(C)?C.value=s:C=s},{default:o((()=>[h(y(e.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),r(" 推荐列表 "),(t(!0),n(p,null,c(d(z),((e,s)=>(t(),u(l,{key:s},{default:o((()=>[_(i(S,{"scroll-y":"",class:"scroll-view",onScrolltolower:E,"refresher-enabled":"",onRefresherrefresh:G,"refresher-triggered":d(F)},{default:o((()=>[i(l,{class:"goods"},{default:o((()=>[(t(!0),n(p,null,c(e.goodsItems.items,(e=>(t(),u(x,{"hover-class":"none",class:"navigator",key:e.id,url:`/pages/goods/goods?id=${e.id}`},{default:o((()=>[i(a,{class:"thumb",src:e.picture},null,8,["src"]),i(l,{class:"name ellipsis"},{default:o((()=>[h(y(e.name)+" "+y(e.desc),1)])),_:2},1024),i(l,{class:"price"},{default:o((()=>[i(T,{class:"symbol"},{default:o((()=>[h("¥")])),_:1}),i(T,{class:"number"},{default:o((()=>[h(y(e.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024),i(l,{class:"loading-text"},{default:o((()=>[h(y(e.finished?"正在加载...":"没有更多了~"),1)])),_:2},1024)])),_:2},1032,["refresher-triggered"]),[[b,d(C)==s]])])),_:2},1024)))),128))])),_:1})}}}),[["__scopeId","data-v-0444a395"]]);export{j as default};
